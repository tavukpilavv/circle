import{_ as y,a as P,r as p,w as C,k as i,d as v,o as w,g as t,l as a,m as l,h as f,E as g}from"./index-YMNYrv-z.js";const h={class:"signup-page"},j={class:"signup-container"},q={class:"signup-box"},E={class:"form-row"},U={class:"no-account"},S={__name:"SignupView",setup(R){const c=P(),u=p(null),m=p(!1),r=p({username:"",firstName:"",lastName:"",major:"",email:"",password:"",confirmPassword:""}),V={username:[{required:!0,message:"Username is required",trigger:"blur"}],firstName:[{required:!0,message:"First name is required",trigger:"blur"}],lastName:[{required:!0,message:"Last name is required",trigger:"blur"}],major:[{required:!0,message:"Major is required",trigger:"blur"}],email:[{required:!0,message:"Email is required",trigger:"blur"},{type:"email",message:"Enter a valid email",trigger:["blur","change"]}],password:[{required:!0,message:"Password is required",trigger:"blur"},{min:6,message:"Password must be at least 6 characters",trigger:"blur"}],confirmPassword:[{validator:(d,e,s)=>{e?e!==r.value.password?s(new Error("Passwords do not match")):s():s(new Error("Please confirm your password"))},trigger:["blur","change"]}]};C(()=>r.value.password,()=>{u.value&&u.value.validateField("confirmPassword")});const b=()=>{u.value&&u.value.validate(async d=>{if(d){m.value=!0;try{const e=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({firstName:r.value.firstName,lastName:r.value.lastName,username:r.value.username,email:r.value.email,major:r.value.major,password:r.value.password})}),s=await e.json();e.ok?(g.success("Registration successful! Redirecting to login..."),localStorage.setItem("registered_username",r.value.username),setTimeout(()=>{c.push("/login")},1500)):g.error(s.error||"Registration failed. Please try again.")}catch(e){console.error("Registration error:",e),g.error("Unable to connect to the server.")}finally{m.value=!1}}})};return(d,e)=>{const s=i("el-input"),n=i("el-form-item"),_=i("el-button"),N=i("el-form"),k=i("router-link");return w(),v("div",h,[t("main",null,[t("div",j,[t("div",q,[(w(),v("svg",{class:"close-icon",width:"47",height:"47",viewBox:"0 0 47 47",fill:"none",xmlns:"http://www.w3.org/2000/svg",onClick:e[0]||(e[0]=o=>d.$router.push("/"))},[...e[8]||(e[8]=[t("path",{d:"M18.6042 18.604L28.3959 28.3957",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),t("path",{d:"M28.3959 18.604L18.6042 28.3957",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),t("path",{d:"M33.2917 5.875H13.7083C9.3821 5.875 5.875 9.3821 5.875 13.7083V33.2917C5.875 37.6179 9.3821 41.125 13.7083 41.125H33.2917C37.6179 41.125 41.125 37.6179 41.125 33.2917V13.7083C41.125 9.3821 37.6179 5.875 33.2917 5.875Z",stroke:"var(--Accents-Orange, #FF8D28)","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])])),e[12]||(e[12]=t("h2",{class:"title"},"SIGN UP",-1)),a(N,{ref_key:"formRef",ref:u,model:r.value,rules:V,"label-position":"top",class:"signup-form"},{default:l(()=>[t("div",E,[a(n,{label:"First Name",prop:"firstName"},{default:l(()=>[a(s,{modelValue:r.value.firstName,"onUpdate:modelValue":e[1]||(e[1]=o=>r.value.firstName=o),placeholder:"Enter your first name"},null,8,["modelValue"])]),_:1}),a(n,{label:"Last Name",prop:"lastName"},{default:l(()=>[a(s,{modelValue:r.value.lastName,"onUpdate:modelValue":e[2]||(e[2]=o=>r.value.lastName=o),placeholder:"Enter your last name"},null,8,["modelValue"])]),_:1})]),a(n,{label:"Username",prop:"username"},{default:l(()=>[a(s,{modelValue:r.value.username,"onUpdate:modelValue":e[3]||(e[3]=o=>r.value.username=o),placeholder:"Enter your username"},null,8,["modelValue"])]),_:1}),a(n,{label:"Major",prop:"major"},{default:l(()=>[a(s,{modelValue:r.value.major,"onUpdate:modelValue":e[4]||(e[4]=o=>r.value.major=o),placeholder:"e.g. Computer Science"},null,8,["modelValue"])]),_:1}),a(n,{label:"Email",prop:"email"},{default:l(()=>[a(s,{modelValue:r.value.email,"onUpdate:modelValue":e[5]||(e[5]=o=>r.value.email=o),placeholder:"Enter your e-mail"},null,8,["modelValue"])]),_:1}),a(n,{label:"Password",prop:"password"},{default:l(()=>[a(s,{modelValue:r.value.password,"onUpdate:modelValue":e[6]||(e[6]=o=>r.value.password=o),type:"password","show-password":"",placeholder:"Create a password"},null,8,["modelValue"])]),_:1}),a(n,{label:"Confirm Password",prop:"confirmPassword"},{default:l(()=>[a(s,{modelValue:r.value.confirmPassword,"onUpdate:modelValue":e[7]||(e[7]=o=>r.value.confirmPassword=o),type:"password","show-password":"",placeholder:"Re-enter your password"},null,8,["modelValue"])]),_:1}),a(n,null,{default:l(()=>[a(_,{class:"signup-button",type:"success",loading:m.value,onClick:b},{default:l(()=>[...e[9]||(e[9]=[f(" Sign up ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"]),t("div",U,[e[11]||(e[11]=f(" Already have an account? ",-1)),a(k,{to:"/login"},{default:l(()=>[...e[10]||(e[10]=[f("Sign in.",-1)])]),_:1})])])]),e[13]||(e[13]=t("footer",{class:"bottom-links"},null,-1))])])}}},F=y(S,[["__scopeId","data-v-278dc9f0"]]);export{F as default};

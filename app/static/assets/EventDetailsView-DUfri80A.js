import{_ as B,u as P,a as I,b as N,r as g,c as w,s as v,d as l,o as i,e as k,f as d,g as e,h as y,t as o,n as b,i as S,F as R,j as C,C as T,R as U}from"./index-C9OUpFhX.js";const x={class:"page-wrap"},F={key:0,class:"event-details-container"},j={class:"event-header"},L={class:"community-badge"},z={class:"image-container"},G=["src","alt"],H={class:"tab-controls"},O={class:"content-area"},W={key:0,id:"details-content",class:"fade-in"},Y={class:"info-card"},q={class:"info-row"},J={class:"info-row"},K={class:"info-row"},M={class:"description-section"},Q=["disabled"],X={key:0},Z={key:1},ee={key:1,class:"register-btn event-ended",disabled:""},se={key:1,id:"reviews-content",class:"fade-in"},te={class:"reviews-summary"},ae={class:"summary-actions"},ne={class:"reviews-list"},ie={class:"review-header"},le={class:"reviewer-info"},oe={class:"avatar"},re={class:"name"},de={class:"date"},ue={class:"review-meta"},ve={key:0,class:"review-actions"},ce=["onClick"],fe={class:"review-stars"},ge={class:"review-text"},be={key:1,class:"not-found"},me={__name:"EventDetailsView",setup(pe){const E=P(),h=I(),c=N(),m=g(!1),f=g(!1),r=g("details"),u=g(!1),t=w(()=>{const n=parseInt(E.params.id);return v.events.find(s=>s.id===n)}),p=w(()=>{var a;if(!((a=t.value)!=null&&a.date))return!1;const n=new Date(t.value.date),s=new Date;return s.setHours(0,0,0,0),n<s}),V=w(()=>t.value?v.getReviewsByEventId(t.value.id):[]),$=async()=>{if(t.value){if(!localStorage.getItem("user_token")){c.warning("Please sign in to register."),h.push("/login");return}u.value=!0;try{await new Promise(n=>setTimeout(n,1e3)),v.registerEvent(t.value),t.value.registered?(c.success("Successfully registered for the event! ðŸŽ‰"),m.value=!0):c.info("Unregistered from event.")}catch(n){c.error("Failed to join. Please try again."),console.error(n)}finally{u.value=!1}}},D=n=>{t.value&&(v.addReview({eventId:t.value.id,user:n.isAnonymous?"Incognito User":"You",rating:n.rating,comment:n.feedback,isCurrentUser:!0,isAnonymous:n.isAnonymous}),f.value=!1)},A=n=>{confirm("Are you sure you want to delete your review?")&&v.deleteReview(n)};return(n,s)=>(i(),l("div",x,[t.value?(i(),l("div",F,[e("button",{class:"back-btn",onClick:s[0]||(s[0]=a=>n.$router.go(-1))},[...s[7]||(s[7]=[e("i",{class:"fas fa-arrow-left"},null,-1),y(" Back ",-1)])]),e("div",j,[e("h1",null,o(t.value.name),1),e("span",L,o(t.value.community_name),1)]),e("div",z,[e("img",{src:t.value.image,alt:t.value.alt,class:"event-image"},null,8,G)]),e("div",H,[e("button",{class:b(["tab-btn",{active:r.value==="details"}]),onClick:s[1]||(s[1]=a=>r.value="details")}," About Event ",2),p.value?(i(),l("button",{key:0,class:b(["tab-btn",{active:r.value==="reviews"}]),onClick:s[2]||(s[2]=a=>r.value="reviews")}," Reviews & Ratings ",2)):d("",!0)]),e("div",O,[r.value==="details"?(i(),l("div",W,[e("div",Y,[e("div",q,[s[9]||(s[9]=e("i",{class:"fas fa-calendar"},null,-1)),e("div",null,[s[8]||(s[8]=e("strong",null,"Date",-1)),e("p",null,o(t.value.date),1)])]),e("div",J,[s[11]||(s[11]=e("i",{class:"fas fa-clock"},null,-1)),e("div",null,[s[10]||(s[10]=e("strong",null,"Time",-1)),e("p",null,o(t.value.time),1)])]),e("div",K,[s[13]||(s[13]=e("i",{class:"fas fa-map-marker-alt"},null,-1)),e("div",null,[s[12]||(s[12]=e("strong",null,"Location",-1)),e("p",null,o(t.value.location),1)])])]),e("div",M,[s[14]||(s[14]=e("h3",null,"About this Event",-1)),e("p",null,o(t.value.description||"No description available."),1)]),p.value?(i(),l("button",ee," Event Ended ")):(i(),l("button",{key:0,class:b(["register-btn",{registered:t.value.registered,"is-loading":u.value}]),onClick:$,disabled:u.value},[u.value?(i(),l("span",X,[...s[15]||(s[15]=[e("i",{class:"fas fa-spinner fa-spin"},null,-1),y(" Processing... ",-1)])])):(i(),l("span",Z,o(t.value.registered?"Registered":"Register Now"),1))],10,Q))])):d("",!0),r.value==="reviews"&&p.value?(i(),l("div",se,[e("div",te,[s[17]||(s[17]=S('<div class="rating-score" data-v-92e1b7a9><span class="score" data-v-92e1b7a9>4.8</span><div class="stars" data-v-92e1b7a9><i class="fas fa-star" data-v-92e1b7a9></i><i class="fas fa-star" data-v-92e1b7a9></i><i class="fas fa-star" data-v-92e1b7a9></i><i class="fas fa-star" data-v-92e1b7a9></i><i class="fas fa-star-half-alt" data-v-92e1b7a9></i></div><span class="count" data-v-92e1b7a9>Based on 128 reviews</span></div>',1)),e("div",ae,[s[16]||(s[16]=e("div",{class:"trustpilot-badge"},[e("i",{class:"fas fa-star",style:{color:"#00b67a"}}),y(" Trustpilot ")],-1)),e("button",{class:"write-review-btn",onClick:s[3]||(s[3]=a=>f.value=!0)}," Write a Review ")])]),e("div",ne,[(i(!0),l(R,null,C(V.value,a=>(i(),l("div",{key:a.id,class:"review-card"},[e("div",ie,[e("div",le,[e("div",oe,o(a.user.charAt(0)),1),e("div",null,[e("span",re,o(a.user),1),e("span",de,o(a.date),1)])]),e("div",ue,[a.isCurrentUser?(i(),l("div",ve,[s[19]||(s[19]=e("button",{class:"action-btn edit-btn",title:"Edit Review"},[e("i",{class:"fas fa-pen"})],-1)),e("button",{class:"action-btn delete-btn",title:"Delete Review",onClick:_=>A(a.id)},[...s[18]||(s[18]=[e("i",{class:"fas fa-trash"},null,-1)])],8,ce)])):d("",!0),e("div",fe,[(i(),l(R,null,C(5,_=>e("i",{key:_,class:b(["fas fa-star",{filled:_<=a.rating}])},null,2)),64))])])]),e("p",ge,o(a.comment),1)]))),128))])])):d("",!0)])])):(i(),l("div",be,[s[20]||(s[20]=e("h2",null,"Event not found",-1)),e("button",{onClick:s[4]||(s[4]=a=>n.$router.push("/events"))},"Go to Events")])),m.value?(i(),k(T,{key:2,onClose:s[5]||(s[5]=a=>m.value=!1)})):d("",!0),t.value?(i(),k(U,{key:3,modelValue:f.value,"onUpdate:modelValue":s[6]||(s[6]=a=>f.value=a),event:t.value,onSubmit:D},null,8,["modelValue","event"])):d("",!0)]))}},we=B(me,[["__scopeId","data-v-92e1b7a9"]]);export{we as default};
